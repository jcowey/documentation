<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: HgvMetaIdentifierHelper::HgvDate</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">HgvMetaIdentifierHelper::HgvDate</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/app/helpers/hgv_meta_identifier_helper_rb.html">
                app/helpers/hgv_meta_identifier_helper.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000559">centuryOptions</a>&nbsp;&nbsp;
      <a href="#M000561">certaintyOptions</a>&nbsp;&nbsp;
      <a href="#M000572">dayFromIso</a>&nbsp;&nbsp;
      <a href="#M000576">epidocToHgv</a>&nbsp;&nbsp;
      <a href="#M000569">extractFromIso</a>&nbsp;&nbsp;
      <a href="#M000565">getCentury</a>&nbsp;&nbsp;
      <a href="#M000566">getCenturyQualifier</a>&nbsp;&nbsp;
      <a href="#M000578">getCertaintyItem</a>&nbsp;&nbsp;
      <a href="#M000564">getDayIso</a>&nbsp;&nbsp;
      <a href="#M000574">getEmptyEpidocItem</a>&nbsp;&nbsp;
      <a href="#M000573">getEmptyHgvItem</a>&nbsp;&nbsp;
      <a href="#M000563">getMonthIso</a>&nbsp;&nbsp;
      <a href="#M000568">getMonthQualifier</a>&nbsp;&nbsp;
      <a href="#M000579">getOffsetItem</a>&nbsp;&nbsp;
      <a href="#M000575">getPrecision</a>&nbsp;&nbsp;
      <a href="#M000577">getPrecisionItem</a>&nbsp;&nbsp;
      <a href="#M000562">getYearIso</a>&nbsp;&nbsp;
      <a href="#M000567">getYearQualifier</a>&nbsp;&nbsp;
      <a href="#M000580">hgvToEpidoc</a>&nbsp;&nbsp;
      <a href="#M000571">monthFromIso</a>&nbsp;&nbsp;
      <a href="#M000557">monthOptions</a>&nbsp;&nbsp;
      <a href="#M000560">offsetOptions</a>&nbsp;&nbsp;
      <a href="#M000556">precisionOptions</a>&nbsp;&nbsp;
      <a href="#M000570">yearFromIso</a>&nbsp;&nbsp;
      <a href="#M000558">yearOptions</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000559" class="method-detail">
        <a name="M000559"></a>

        <div class="method-heading">
          <a href="#M000559" class="method-signature">
          <span class="method-name">centuryOptions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000559-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000559-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 227</span>
227:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">centuryOptions</span>
228:       [[<span class="ruby-value str">''</span>, <span class="ruby-value str">''</span>], 
229:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.beginning'</span>), <span class="ruby-identifier">:beginning</span>], 
230:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.beginningCirca'</span>), <span class="ruby-identifier">:beginningCirca</span>], 
231:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.beginningToMiddle'</span>), <span class="ruby-identifier">:beginningToMiddle</span>], 
232:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.beginningToMiddleCirca'</span>), <span class="ruby-identifier">:beginningToMiddleCirca</span>], 
233:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.firstHalf'</span>), <span class="ruby-identifier">:firstHalf</span>], 
234:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.firstHalfCirca'</span>), <span class="ruby-identifier">:firstHalfCirca</span>], 
235:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.firstHalfToMiddle'</span>), <span class="ruby-identifier">:firstHalfToMiddle</span>], 
236:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.firstHalfToMiddleCirca'</span>), <span class="ruby-identifier">:firstHalfToMiddleCirca</span>], 
237:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.middle'</span>), <span class="ruby-identifier">:middle</span>], 
238:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.middleCirca'</span>), <span class="ruby-identifier">:middleCirca</span>], 
239:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.middleToSecondHalf'</span>), <span class="ruby-identifier">:middleToSecondHalf</span>], 
240:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.middleToSecondHalfCirca'</span>), <span class="ruby-identifier">:middleToSecondHalfCirca</span>], 
241:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.secondHalf'</span>), <span class="ruby-identifier">:secondHalf</span>], 
242:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.secondHalfCirca'</span>), <span class="ruby-identifier">:secondHalfCirca</span>], 
243:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.middleToEnd'</span>), <span class="ruby-identifier">:middleToEnd</span>], 
244:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.middleToEndCirca'</span>), <span class="ruby-identifier">:middleToEndCirca</span>], 
245:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.end'</span>), <span class="ruby-identifier">:end</span>], 
246:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.endCirca'</span>), <span class="ruby-identifier">:endCirca</span>]]
247:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000561" class="method-detail">
        <a name="M000561"></a>

        <div class="method-heading">
          <a href="#M000561" class="method-signature">
          <span class="method-name">certaintyOptions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000561-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000561-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 257</span>
257:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">certaintyOptions</span>
258:       [[<span class="ruby-value str">''</span>, <span class="ruby-value str">''</span>], 
259:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.certaintyLow'</span>), <span class="ruby-identifier">:low</span>], 
260:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.dayUncertain'</span>), <span class="ruby-identifier">:day</span>], 
261:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.monthUncertain'</span>), <span class="ruby-identifier">:month</span>], 
262:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.yearUncertain'</span>), <span class="ruby-identifier">:year</span>],
263:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.dayAndMonthUncertain'</span>), <span class="ruby-identifier">:day_month</span>],
264:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.monthAndYearUncertain'</span>), <span class="ruby-identifier">:month_year</span>],
265:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.dayAndYearUncertain'</span>), <span class="ruby-identifier">:day_year</span>],
266:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.dayMonthAndYearUncertain'</span>), <span class="ruby-identifier">:day_month_year</span>]]
267:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000572" class="method-detail">
        <a name="M000572"></a>

        <div class="method-heading">
          <a href="#M000572" class="method-signature">
          <span class="method-name">dayFromIso</span><span class="method-args">(iso)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000572-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000572-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 512</span>
512:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">dayFromIso</span> <span class="ruby-identifier">iso</span>
513:       <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">extractFromIso</span> <span class="ruby-identifier">iso</span>, <span class="ruby-regexp re">/\A-?\d\d\d\d-\d\d-(\d\d)\Z/</span>
514:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000576" class="method-detail">
        <a name="M000576"></a>

        <div class="method-heading">
          <a href="#M000576" class="method-signature">
          <span class="method-name">epidocToHgv</span><span class="method-args">(date_item)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000576-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000576-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 552</span>
552:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">epidocToHgv</span> <span class="ruby-identifier">date_item</span>      
553:       <span class="ruby-identifier">t</span> = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getEmptyHgvItem</span>
554: 
555:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-comment cmt"># simple case: no date</span>
556:         <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:empty</span>] = <span class="ruby-keyword kw">true</span>
557:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">t</span>
558:       <span class="ruby-keyword kw">end</span>
559:       
560:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:value</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'unbekannt'</span> <span class="ruby-comment cmt"># simple case: date is specified as unknown</span>
561:         <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:unknown</span>] = <span class="ruby-keyword kw">true</span>
562:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">t</span>
563:       <span class="ruby-keyword kw">end</span>
564: 
565:       <span class="ruby-keyword kw">begin</span> <span class="ruby-comment cmt"># complex case: process date information</span>
566:         
567:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:attributes</span>]
568: 
569:           <span class="ruby-comment cmt"># date1</span>
570:           <span class="ruby-identifier">iso</span> = <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:when</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:when</span>] <span class="ruby-operator">:</span> (<span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:notBefore</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:notBefore</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:notAfter</span>])
571:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">iso</span>
572:             <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y</span>] = <span class="ruby-identifier">yearFromIso</span> <span class="ruby-identifier">iso</span>
573:             <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m</span>] = <span class="ruby-identifier">monthFromIso</span> <span class="ruby-identifier">iso</span>
574:             <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d</span>] = <span class="ruby-identifier">dayFromIso</span> <span class="ruby-identifier">iso</span>
575: 
576:             <span class="ruby-comment cmt"># date2</span>
577:             <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] = <span class="ruby-identifier">yearFromIso</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:notAfter</span>]
578:             <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] = <span class="ruby-identifier">monthFromIso</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:notAfter</span>]
579:             <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d2</span>] = <span class="ruby-identifier">dayFromIso</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:notAfter</span>]
580: 
581:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:children</span>]
582:               <span class="ruby-comment cmt"># ca.</span>
583:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:precision</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'medium'</span>
584:                 <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:ca</span>] = <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:ca2</span>] = <span class="ruby-keyword kw">true</span>
585:               <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>]
586:                 <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>].<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">precision</span><span class="ruby-operator">|</span>
587:                   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">precision</span>[<span class="ruby-identifier">:attributes</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">precision</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:degree</span>] <span class="ruby-operator">&amp;&amp;</span> [<span class="ruby-value str">'0.1'</span>, <span class="ruby-value str">'0.5'</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">precision</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:degree</span>])
588:                     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">precision</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:match</span>]
589:                       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">precision</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:match</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'notBefore'</span>)
590:                         <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:ca</span>] = <span class="ruby-keyword kw">true</span>
591:                       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">precision</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:match</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'notAfter'</span>)
592:                         <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:ca2</span>] = <span class="ruby-keyword kw">true</span>
593:                       <span class="ruby-keyword kw">end</span>
594:                     <span class="ruby-keyword kw">else</span>
595:                       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:ca</span>] = <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:ca2</span>] = <span class="ruby-keyword kw">true</span>
596:                     <span class="ruby-keyword kw">end</span>
597:                   <span class="ruby-keyword kw">end</span>
598:                 }
599:               <span class="ruby-keyword kw">end</span>
600: 
601:               <span class="ruby-comment cmt"># qualifier</span>
602:               <span class="ruby-identifier">isVague</span> = <span class="ruby-identifier">isVague2</span> = <span class="ruby-keyword kw">false</span>
603:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:precision</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'low'</span>
604:                 <span class="ruby-identifier">isVague</span> = <span class="ruby-identifier">isVague2</span> = <span class="ruby-keyword kw">true</span>
605:               <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>]
606:                 <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>].<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">precision</span><span class="ruby-operator">|</span>
607:                   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">precision</span>[<span class="ruby-identifier">:attributes</span>] <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-operator">!</span><span class="ruby-identifier">precision</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:degree</span>] <span class="ruby-operator">||</span> (<span class="ruby-identifier">precision</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:degree</span>] <span class="ruby-operator">&amp;&amp;</span> [<span class="ruby-value str">'0.1'</span>, <span class="ruby-value str">'0.3'</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">precision</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:degree</span>])))
608:                     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">precision</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:match</span>]
609:                       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">precision</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:match</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'notBefore'</span>)
610:                         <span class="ruby-identifier">isVague</span> = <span class="ruby-keyword kw">true</span>
611:                       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">precision</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:match</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'notAfter'</span>)
612:                         <span class="ruby-identifier">isVague2</span> = <span class="ruby-keyword kw">true</span>
613:                       <span class="ruby-keyword kw">end</span>
614:                     <span class="ruby-keyword kw">else</span>
615:                       <span class="ruby-identifier">isVague</span> = <span class="ruby-identifier">isVague2</span> = <span class="ruby-keyword kw">true</span>
616:                     <span class="ruby-keyword kw">end</span>
617:                   <span class="ruby-keyword kw">end</span>
618:                 }
619:               <span class="ruby-keyword kw">end</span>
620: 
621:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">isVague</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">isVague2</span>
622:                 
623:                 <span class="ruby-comment cmt"># century</span>
624:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">isVague</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>[<span class="ruby-identifier">:t</span>]
625:                  
626:                   <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:c</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getCentury</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y</span>] <span class="ruby-comment cmt"># century no. 1</span>
627: 
628:                   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">isVague2</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>[<span class="ruby-identifier">:t2</span>]
629:                     <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:c2</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getCentury</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] <span class="ruby-comment cmt"># century no. 2</span>
630:                   <span class="ruby-keyword kw">end</span>
631: 
632:                   <span class="ruby-identifier">cx</span> = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getCenturyQualifier</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y</span>], <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>]  <span class="ruby-comment cmt"># century qualifier (beginning, middle, end)</span>
633:                   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cx</span>.<span class="ruby-identifier">instance_of?</span> <span class="ruby-constant">Array</span>
634:                     <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:cx</span>], <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:cx2</span>] = <span class="ruby-identifier">cx</span>
635:                   <span class="ruby-keyword kw">else</span>
636:                     <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:cx</span>] = <span class="ruby-identifier">cx</span>
637:                   <span class="ruby-keyword kw">end</span>
638: 
639:                   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:c</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:c2</span>]
640:                     <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:c2</span>] = <span class="ruby-keyword kw">nil</span> <span class="ruby-comment cmt"># combine century no.1 and no.2</span>
641:                   <span class="ruby-keyword kw">end</span>
642: 
643:                   <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y</span>] = <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] = <span class="ruby-keyword kw">nil</span> <span class="ruby-comment cmt"># kill years                  </span>
644:                 <span class="ruby-keyword kw">end</span>
645:                 
646:                 <span class="ruby-comment cmt"># year</span>
647:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">isVague</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>[<span class="ruby-identifier">:t</span>]
648:                   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">isVague2</span> <span class="ruby-operator">&amp;&amp;</span>  <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>[<span class="ruby-identifier">:t2</span>]
649:                     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>]
650:                       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:yx</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getYearQualifier</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m</span>], <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] <span class="ruby-comment cmt"># combine date no. 1 and date no. 2</span>
651:                       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] = <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m</span>] = <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] = <span class="ruby-keyword kw">nil</span>
652:                     <span class="ruby-keyword kw">else</span>
653:                       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:yx</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getYearQualifier</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m</span>]
654:                       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:yx2</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getYearQualifier</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>]
655:                       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m</span>] = <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] = <span class="ruby-keyword kw">nil</span>
656:                     <span class="ruby-keyword kw">end</span>
657:                   <span class="ruby-keyword kw">else</span>
658:                     <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:yx</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getYearQualifier</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m</span>]
659:                     <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m</span>] = <span class="ruby-keyword kw">nil</span>
660:                   <span class="ruby-keyword kw">end</span>
661:                 <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">isVague2</span> <span class="ruby-operator">&amp;&amp;</span>  <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d2</span>]
662:                   <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:yx2</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getYearQualifier</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>]
663:                   <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] = <span class="ruby-keyword kw">nil</span>
664:                 <span class="ruby-keyword kw">end</span>
665:                 
666:                 <span class="ruby-comment cmt">#month</span>
667:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">isVague</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:t</span>]
668:                   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">isVague2</span> <span class="ruby-operator">&amp;&amp;</span>  <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:t2</span>]
669:                     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>]
670:                       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:mx</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getMonthQualifier</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d</span>], <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d2</span>] <span class="ruby-comment cmt"># combine date no. 1 and date no. 2</span>
671:                       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] = <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] = <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:t</span>] = <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:t2</span>] = <span class="ruby-keyword kw">nil</span>
672:                     <span class="ruby-keyword kw">else</span>
673:                       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:mx</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getMonthQualifier</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d</span>]
674:                       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:mx2</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getMonthQualifier</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d2</span>]
675:                       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d</span>] = <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d2</span>] = <span class="ruby-keyword kw">nil</span>
676:                     <span class="ruby-keyword kw">end</span>
677:                   <span class="ruby-keyword kw">else</span>
678:                     <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:mx</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getMonthQualifier</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d</span>]
679:                     <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d</span>] = <span class="ruby-keyword kw">nil</span>
680:                   <span class="ruby-keyword kw">end</span>
681:                 <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">isVague2</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d2</span>]
682:                   <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:mx2</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getMonthQualifier</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d2</span>]
683:                   <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d2</span>] = <span class="ruby-keyword kw">nil</span>
684:                 <span class="ruby-keyword kw">end</span>
685: 
686:                 <span class="ruby-comment cmt"># ...(?)</span>
687:                 <span class="ruby-identifier">t</span>.<span class="ruby-identifier">each_pair</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
688:                   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'x'</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">v</span>
689:                     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'2'</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:ca2</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:ca</span>]
690:                       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">k</span>] = (<span class="ruby-identifier">v</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'Circa'</span>).<span class="ruby-identifier">to_sym</span>
691:                     <span class="ruby-keyword kw">end</span>
692:                   <span class="ruby-keyword kw">end</span>
693:                 }
694:               <span class="ruby-keyword kw">end</span> <span class="ruby-comment cmt">#isVague</span>
695: 
696:               <span class="ruby-comment cmt"># precision</span>
697:               <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:precision</span>] = <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>.<span class="ruby-identifier">reject</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'2'</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">v</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> }.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">join</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'x'</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:ca</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">:ca</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
698:               <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:precision2</span>] = (<span class="ruby-operator">!</span><span class="ruby-identifier">t</span>.<span class="ruby-identifier">reject</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-operator">!</span><span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'2'</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">v</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> }.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">join</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'x'</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:ca2</span>] <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:c2</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d2</span>])) <span class="ruby-operator">?</span> <span class="ruby-identifier">:ca</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
699: 
700:               <span class="ruby-comment cmt"># offset</span>
701:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:offset</span>]
702:                 <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:offset</span>].<span class="ruby-identifier">each_index</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
703:                    <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:offset</span>][<span class="ruby-identifier">i</span>][<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:type</span>]
704:                    <span class="ruby-identifier">position</span> = <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:offset</span>][<span class="ruby-identifier">i</span>][<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:position</span>]
705:                    <span class="ruby-identifier">attribute</span> = (<span class="ruby-value str">'offset'</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">position</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'2'</span> <span class="ruby-operator">?</span> <span class="ruby-value str">'2'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>)).<span class="ruby-identifier">to_sym</span>
706:                    
707:                    <span class="ruby-identifier">t</span>[<span class="ruby-identifier">attribute</span>] = <span class="ruby-identifier">offset</span>.<span class="ruby-identifier">to_sym</span>
708:                    
709:                    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:certainty</span>]
710:                      <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:certainty</span>].<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">certainty</span><span class="ruby-operator">|</span>
711:                        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">certainty</span>[<span class="ruby-identifier">:attributes</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">certainty</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:match</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">certainty</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:match</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;../offset[@type='&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">offset</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;']&quot;</span>
712:                          <span class="ruby-identifier">t</span>[<span class="ruby-identifier">attribute</span>] = (<span class="ruby-identifier">t</span>[<span class="ruby-identifier">attribute</span>].<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'Uncertain'</span>).<span class="ruby-identifier">to_sym</span>
713:                        <span class="ruby-keyword kw">end</span>
714:                      }
715:                    <span class="ruby-keyword kw">end</span>
716:                 }
717:               <span class="ruby-keyword kw">end</span>
718: 
719:               <span class="ruby-comment cmt"># certainties</span>
720: 
721:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:certainty</span>]
722:                 <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:certainty</span>] = <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:certainty</span>].<span class="ruby-identifier">to_sym</span>
723:               <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:certainty</span>]
724:                 <span class="ruby-identifier">cert</span> = {<span class="ruby-identifier">:days</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:months</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:years</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>}
725:                 <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:certainty</span>].<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">certainty</span><span class="ruby-operator">|</span>
726:                   <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">certainty</span>[<span class="ruby-identifier">:attributes</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">certainty</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:match</span>]
727:                     <span class="ruby-identifier">cert</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
728:                       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">certainty</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:match</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>]
729:                         <span class="ruby-identifier">cert</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
730:                       <span class="ruby-keyword kw">end</span>
731:                     }
732:                   <span class="ruby-keyword kw">end</span>
733:                 }
734:                 <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cert</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">join</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
735:                   <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:certainty</span>] = <span class="ruby-identifier">cert</span>.<span class="ruby-identifier">delete_if</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>}.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">to_s</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>] }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">'_'</span>).<span class="ruby-identifier">to_sym</span> <span class="ruby-comment cmt"># CL support for plurals goes here</span>
736:                 <span class="ruby-keyword kw">end</span>
737:               <span class="ruby-keyword kw">end</span>
738:               
739:               <span class="ruby-comment cmt"># kill doublets and left overs</span>
740: 
741:               <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] = (<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y</span>] <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>])
742:               <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] = (<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m</span>] <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>])
743:               <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d2</span>] = (<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d2</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d</span>] <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d2</span>])
744:               <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:precision2</span>] = (<span class="ruby-operator">!</span><span class="ruby-identifier">t</span>[<span class="ruby-identifier">:d2</span>]  <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>[<span class="ruby-identifier">:m2</span>]  <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>[<span class="ruby-identifier">:y2</span>]  <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>[<span class="ruby-identifier">:c2</span>]  <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:precision2</span>])
745: 
746:             <span class="ruby-keyword kw">end</span>
747: 
748:           <span class="ruby-keyword kw">end</span>
749:         <span class="ruby-keyword kw">end</span>
750:       
751:       <span class="ruby-keyword kw">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
752:         <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:error</span>] =  <span class="ruby-identifier">e</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-value str">': '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span> <span class="ruby-operator">+</span> <span class="ruby-value str">' ('</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-operator">+</span> <span class="ruby-value str">')'</span> <span class="ruby-comment cmt"># $!, $ERROR_INFO</span>
753:       <span class="ruby-keyword kw">end</span>
754:   
755:       <span class="ruby-identifier">t</span>
756:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000569" class="method-detail">
        <a name="M000569"></a>

        <div class="method-heading">
          <a href="#M000569" class="method-signature">
          <span class="method-name">extractFromIso</span><span class="method-args">(iso, regex)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000569-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000569-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 496</span>
496:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">extractFromIso</span> <span class="ruby-identifier">iso</span>, <span class="ruby-identifier">regex</span> 
497:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">iso</span>
498:         <span class="ruby-identifier">iso</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">regex</span> <span class="ruby-value">? </span><span class="ruby-identifier">iso</span>[<span class="ruby-identifier">regex</span>, <span class="ruby-value">1</span>].<span class="ruby-identifier">to_i</span>  <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
499:       <span class="ruby-keyword kw">else</span>
500:         <span class="ruby-keyword kw">nil</span>
501:       <span class="ruby-keyword kw">end</span>
502:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000565" class="method-detail">
        <a name="M000565"></a>

        <div class="method-heading">
          <a href="#M000565" class="method-signature">
          <span class="method-name">getCentury</span><span class="method-args">(year)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000565-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000565-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 361</span>
361:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getCentury</span> <span class="ruby-identifier">year</span>
362:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">year</span>
363:         <span class="ruby-keyword kw">nil</span>
364:       <span class="ruby-keyword kw">else</span>
365:         (<span class="ruby-identifier">year</span>.<span class="ruby-identifier">abs</span> <span class="ruby-operator">/</span> <span class="ruby-value">100</span> <span class="ruby-operator">+</span> ((<span class="ruby-identifier">year</span>.<span class="ruby-identifier">abs</span> <span class="ruby-operator">%</span> <span class="ruby-value">100</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-value">1</span>)) <span class="ruby-operator">*</span> (<span class="ruby-identifier">year</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-value">-1</span>)
366:       <span class="ruby-keyword kw">end</span>
367:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000566" class="method-detail">
        <a name="M000566"></a>

        <div class="method-heading">
          <a href="#M000566" class="method-signature">
          <span class="method-name">getCenturyQualifier</span><span class="method-args">(year, year2)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000566-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000566-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 369</span>
369:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getCenturyQualifier</span> <span class="ruby-identifier">year</span>, <span class="ruby-identifier">year2</span>
370:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">year</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">year2</span>
371:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
372:       <span class="ruby-keyword kw">end</span>
373: 
374:       <span class="ruby-identifier">century</span> = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getCentury</span> <span class="ruby-identifier">year</span>
375:       <span class="ruby-identifier">century2</span> = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getCentury</span> <span class="ruby-identifier">year2</span>
376:       <span class="ruby-identifier">tens</span> = <span class="ruby-identifier">year</span>.<span class="ruby-identifier">abs</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">2</span>, <span class="ruby-value str">'0'</span>)[<span class="ruby-value">-2</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">year</span>.<span class="ruby-identifier">abs</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">year</span>)
377:       <span class="ruby-identifier">tens2</span> = <span class="ruby-identifier">year2</span>.<span class="ruby-identifier">abs</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">2</span>, <span class="ruby-value str">'0'</span>)[<span class="ruby-value">-2</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">year2</span>.<span class="ruby-identifier">abs</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">year2</span>)
378: 
379:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">century</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">century2</span>
380:         <span class="ruby-keyword kw">return</span> {
381:           [<span class="ruby-value">1</span>, <span class="ruby-value">25</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:beginning</span>,
382:           [<span class="ruby-value">26</span>, <span class="ruby-value">50</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:firstHalfToMiddle</span>,
383:           [<span class="ruby-value">51</span>, <span class="ruby-value">75</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middleToSecondHalf</span>,
384:           [<span class="ruby-value">76</span>, <span class="ruby-value">0</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:end</span>,
385:           [<span class="ruby-value">1</span>, <span class="ruby-value">50</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:firstHalf</span>,
386:           [<span class="ruby-value">26</span>, <span class="ruby-value">75</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middle</span>,
387:           [<span class="ruby-value">51</span>, <span class="ruby-value">0</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:secondHalf</span>,
388:           [<span class="ruby-value">1</span>, <span class="ruby-value">75</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:beginningToMiddle</span>,
389:           [<span class="ruby-value">26</span>, <span class="ruby-value">0</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middleToEnd</span>,
390: 
391:           [<span class="ruby-value">0</span>, <span class="ruby-value">-76</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:beginning</span>,
392:           [<span class="ruby-value">-75</span>, <span class="ruby-value">-51</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:firstHalfToMiddle</span>,
393:           [<span class="ruby-value">-50</span>, <span class="ruby-value">-26</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middleToSecondHalf</span>,
394:           [<span class="ruby-value">-25</span>, <span class="ruby-value">-1</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:end</span>,
395:           [<span class="ruby-value">0</span>, <span class="ruby-value">-51</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:firstHalf</span>,
396:           [<span class="ruby-value">-75</span>, <span class="ruby-value">-26</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middle</span>,
397:           [<span class="ruby-value">-50</span>, <span class="ruby-value">-1</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:secondHalf</span>,
398:           [<span class="ruby-value">0</span>, <span class="ruby-value">-26</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:beginningToMiddle</span>,
399:           [<span class="ruby-value">-75</span>, <span class="ruby-value">-1</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middleToEnd</span>
400:         }[[<span class="ruby-identifier">tens</span>, <span class="ruby-identifier">tens2</span>]]
401:       <span class="ruby-keyword kw">else</span>
402:         <span class="ruby-keyword kw">return</span> [
403:           {
404:             <span class="ruby-comment cmt">#1 =&gt; :beginning,</span>
405:             <span class="ruby-value">26</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middle</span>,
406:             <span class="ruby-value">51</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:secondHalf</span>,
407:             <span class="ruby-value">76</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:end</span>,
408:             
409:             <span class="ruby-comment cmt">#0 =&gt; :beginning,</span>
410:             <span class="ruby-value">-75</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middle</span>,
411:             <span class="ruby-value">-50</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:secondHalf</span>,
412:             <span class="ruby-value">-25</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:end</span>
413:           }[<span class="ruby-identifier">tens</span>],
414:           {
415:             <span class="ruby-value">25</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:beginning</span>,
416:             <span class="ruby-value">50</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:fisrtHalf</span>,
417:             <span class="ruby-value">75</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middle</span>,
418:             <span class="ruby-comment cmt">#0 =&gt; :end,</span>
419:             
420:             <span class="ruby-value">-76</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:beginning</span>,
421:             <span class="ruby-value">-51</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:firstHalf</span>,
422:             <span class="ruby-value">-26</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middle</span>,
423:             <span class="ruby-comment cmt">#-1 =&gt; :end</span>
424:           }[<span class="ruby-identifier">tens2</span>]
425:         ]
426:       <span class="ruby-keyword kw">end</span>
427:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000578" class="method-detail">
        <a name="M000578"></a>

        <div class="method-heading">
          <a href="#M000578" class="method-signature">
          <span class="method-name">getCertaintyItem</span><span class="method-args">(match)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000578-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000578-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 769</span>
769:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getCertaintyItem</span> <span class="ruby-identifier">match</span> 
770:       {
771:         <span class="ruby-identifier">:value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
772:         <span class="ruby-identifier">:children</span> =<span class="ruby-operator">&gt;</span> {},
773:         <span class="ruby-identifier">:attributes</span> =<span class="ruby-operator">&gt;</span> {
774:           <span class="ruby-identifier">:match</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">match</span>
775:         }
776:       }   
777:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000564" class="method-detail">
        <a name="M000564"></a>

        <div class="method-heading">
          <a href="#M000564" class="method-signature">
          <span class="method-name">getDayIso</span><span class="method-args">(day, month, monthQualifier, chron)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000564-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000564-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 337</span>
337:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getDayIso</span> <span class="ruby-identifier">day</span>, <span class="ruby-identifier">month</span>, <span class="ruby-identifier">monthQualifier</span>, <span class="ruby-identifier">chron</span>
338:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">day</span>
339:         <span class="ruby-identifier">day</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">2</span>, <span class="ruby-value str">'0'</span>)
340:       <span class="ruby-keyword kw">else</span>
341:         <span class="ruby-identifier">m</span> = <span class="ruby-identifier">month</span>.<span class="ruby-identifier">to_i</span>
342:         <span class="ruby-identifier">day_max</span> = <span class="ruby-identifier">m</span> <span class="ruby-value">? </span>(<span class="ruby-identifier">m</span> <span class="ruby-operator">!=</span> <span class="ruby-value">2</span> <span class="ruby-operator">?</span> (<span class="ruby-identifier">m</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">8</span> <span class="ruby-operator">?</span> ((<span class="ruby-identifier">m</span> <span class="ruby-operator">%</span> <span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value">30</span> <span class="ruby-operator">:</span> <span class="ruby-value">31</span>) <span class="ruby-operator">:</span> ((<span class="ruby-identifier">m</span> <span class="ruby-operator">%</span> <span class="ruby-value">2</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value">31</span> <span class="ruby-operator">:</span> <span class="ruby-value">30</span>) ) <span class="ruby-operator">:</span> (<span class="ruby-identifier">y</span> <span class="ruby-operator">&amp;&amp;</span> ((<span class="ruby-identifier">y</span> <span class="ruby-operator">%</span> <span class="ruby-value">4</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>) <span class="ruby-operator">&amp;&amp;</span> (((<span class="ruby-identifier">y</span> <span class="ruby-operator">%</span> <span class="ruby-value">100</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>) <span class="ruby-operator">||</span> ((<span class="ruby-identifier">y</span> <span class="ruby-operator">%</span> <span class="ruby-value">400</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>)) <span class="ruby-operator">?</span> <span class="ruby-value">29</span> <span class="ruby-operator">:</span> <span class="ruby-value">28</span>)) <span class="ruby-operator">:</span> <span class="ruby-value">31</span>
343: 
344:         {
345:           <span class="ruby-identifier">:chronMin</span> =<span class="ruby-operator">&gt;</span> {
346:             <span class="ruby-keyword kw">nil</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
347:             <span class="ruby-identifier">:beginning</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'01'</span>,
348:             <span class="ruby-identifier">:middle</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'11'</span>,
349:             <span class="ruby-identifier">:end</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'21'</span>
350:           },
351:           <span class="ruby-identifier">:chronMax</span> =<span class="ruby-operator">&gt;</span> {
352:             <span class="ruby-keyword kw">nil</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
353:             <span class="ruby-identifier">:beginning</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>,
354:             <span class="ruby-identifier">:middle</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'20'</span>,
355:             <span class="ruby-identifier">:end</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">day_max</span>.<span class="ruby-identifier">to_s</span>
356:           }
357:         }[<span class="ruby-identifier">chron</span>][<span class="ruby-identifier">monthQualifier</span> <span class="ruby-value">? </span><span class="ruby-identifier">monthQualifier</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">'Circa'</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">to_sym</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>]
358:       <span class="ruby-keyword kw">end</span>
359:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000574" class="method-detail">
        <a name="M000574"></a>

        <div class="method-heading">
          <a href="#M000574" class="method-signature">
          <span class="method-name">getEmptyEpidocItem</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000574-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000574-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 527</span>
527:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getEmptyEpidocItem</span>
528:       {
529:         <span class="ruby-identifier">:value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
530:         <span class="ruby-identifier">:attributes</span> =<span class="ruby-operator">&gt;</span> {
531:           <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
532:           <span class="ruby-identifier">:when</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
533:           <span class="ruby-identifier">:notBefore</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
534:           <span class="ruby-identifier">:notAfter</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
535:           <span class="ruby-identifier">:certainty</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
536:           <span class="ruby-identifier">:precision</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>
537:         },
538:         <span class="ruby-identifier">:children</span> =<span class="ruby-operator">&gt;</span> {
539:           <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> [],
540:           <span class="ruby-identifier">:precision</span> =<span class="ruby-operator">&gt;</span> [],
541:           <span class="ruby-identifier">:certainty</span> =<span class="ruby-operator">&gt;</span> []
542:         }
543:       }
544:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000573" class="method-detail">
        <a name="M000573"></a>

        <div class="method-heading">
          <a href="#M000573" class="method-signature">
          <span class="method-name">getEmptyHgvItem</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000573-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000573-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 516</span>
516:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getEmptyHgvItem</span>
517:       {
518:         <span class="ruby-identifier">:c</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:y</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:m</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:d</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:cx</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:yx</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:mx</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:precision</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:ca</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>,
519:         <span class="ruby-identifier">:c2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:y2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:m2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:d2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:cx2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:yx2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:mx2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:offset2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:precision2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:ca2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>,
520:         <span class="ruby-identifier">:certainty</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
521:         <span class="ruby-identifier">:unknown</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
522:         <span class="ruby-identifier">:error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
523:         <span class="ruby-identifier">:empty</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>
524:       }
525:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000563" class="method-detail">
        <a name="M000563"></a>

        <div class="method-heading">
          <a href="#M000563" class="method-signature">
          <span class="method-name">getMonthIso</span><span class="method-args">(month, yearQualifier, chron)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000563-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000563-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 308</span>
308:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getMonthIso</span> <span class="ruby-identifier">month</span>, <span class="ruby-identifier">yearQualifier</span>, <span class="ruby-identifier">chron</span>
309:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">month</span>
310:         <span class="ruby-identifier">month</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">2</span>, <span class="ruby-value str">'0'</span>)
311:       <span class="ruby-keyword kw">else</span>
312:         {
313:           <span class="ruby-identifier">:chronMin</span> =<span class="ruby-operator">&gt;</span> {
314:             <span class="ruby-keyword kw">nil</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
315:             <span class="ruby-identifier">:beginning</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'01'</span>,
316:             <span class="ruby-identifier">:firstHalf</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'01'</span>,
317:             <span class="ruby-identifier">:firstHalfToMiddle</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'04'</span>,
318:             <span class="ruby-identifier">:middle</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'04'</span>,
319:             <span class="ruby-identifier">:middleToSecondHalf</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'07'</span>,
320:             <span class="ruby-identifier">:secondHalf</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'07'</span>,
321:             <span class="ruby-identifier">:end</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>
322:           },
323:           <span class="ruby-identifier">:chronMax</span> =<span class="ruby-operator">&gt;</span> {
324:             <span class="ruby-keyword kw">nil</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
325:             <span class="ruby-identifier">:beginning</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'03'</span>,
326:             <span class="ruby-identifier">:firstHalf</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'06'</span>,
327:             <span class="ruby-identifier">:firstHalfToMiddle</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'06'</span>,
328:             <span class="ruby-identifier">:middle</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'09'</span>,
329:             <span class="ruby-identifier">:middleToSecondHalf</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'09'</span>,
330:             <span class="ruby-identifier">:secondHalf</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'12'</span>,
331:             <span class="ruby-identifier">:end</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'12'</span>
332:           }
333:         }[<span class="ruby-identifier">chron</span>][<span class="ruby-identifier">yearQualifier</span> <span class="ruby-value">? </span><span class="ruby-identifier">yearQualifier</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">'Circa'</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">to_sym</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>]
334:       <span class="ruby-keyword kw">end</span>
335:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000568" class="method-detail">
        <a name="M000568"></a>

        <div class="method-heading">
          <a href="#M000568" class="method-signature">
          <span class="method-name">getMonthQualifier</span><span class="method-args">(day = nil, day2 = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000568-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000568-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 472</span>
472:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getMonthQualifier</span> <span class="ruby-identifier">day</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">day2</span> = <span class="ruby-keyword kw">nil</span>
473:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">day</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">day2</span>
474:         <span class="ruby-keyword kw">return</span> {
475:           [<span class="ruby-value">1</span>, <span class="ruby-value">10</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:beginning</span>,
476:           [<span class="ruby-value">11</span>, <span class="ruby-value">20</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middle</span>,
477:           [<span class="ruby-value">21</span>, <span class="ruby-value">28</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:end</span> <span class="ruby-comment cmt"># CL</span>
478:         }[[<span class="ruby-identifier">day</span>, <span class="ruby-identifier">day2</span>]]
479:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">day</span>
480:         <span class="ruby-keyword kw">return</span> {
481:           <span class="ruby-value">1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:beginning</span>,
482:           <span class="ruby-value">11</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middle</span>,
483:           <span class="ruby-value">21</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:end</span>
484:         }[<span class="ruby-identifier">day</span>]
485:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">day2</span>
486:         <span class="ruby-keyword kw">return</span> {
487:           <span class="ruby-value">10</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:beginning</span>,
488:           <span class="ruby-value">20</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middle</span>,
489:           <span class="ruby-value">28</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:end</span> <span class="ruby-comment cmt"># CL</span>
490:         }[<span class="ruby-identifier">day2</span>]
491:       <span class="ruby-keyword kw">else</span>
492:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
493:       <span class="ruby-keyword kw">end</span>
494:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000579" class="method-detail">
        <a name="M000579"></a>

        <div class="method-heading">
          <a href="#M000579" class="method-signature">
          <span class="method-name">getOffsetItem</span><span class="method-args">(offset, position)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000579-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000579-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 779</span>
779:     <span class="ruby-keyword kw">def</span>  <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getOffsetItem</span> <span class="ruby-identifier">offset</span>, <span class="ruby-identifier">position</span>
780:       <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">offset</span>.<span class="ruby-identifier">to_sym</span>
781:       {
782:         <span class="ruby-identifier">:value</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:before</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'vor'</span>, <span class="ruby-identifier">:after</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'nach'</span>, <span class="ruby-identifier">:beforeUncertain</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'vor (?)'</span>, <span class="ruby-identifier">:afterUncertain</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'nach (?)'</span>}[<span class="ruby-identifier">offset</span>],
783:         <span class="ruby-identifier">:children</span> =<span class="ruby-operator">&gt;</span> {},
784:         <span class="ruby-identifier">:attributes</span> =<span class="ruby-operator">&gt;</span> {
785:           <span class="ruby-identifier">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">offset</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">'Uncertain'</span>, <span class="ruby-value str">''</span>),
786:           <span class="ruby-identifier">:position</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">position</span>
787:         }
788:       }
789:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000575" class="method-detail">
        <a name="M000575"></a>

        <div class="method-heading">
          <a href="#M000575" class="method-signature">
          <span class="method-name">getPrecision</span><span class="method-args">(precision, cx, yx, mx)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000575-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000575-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 546</span>
546:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getPrecision</span> <span class="ruby-identifier">precision</span>, <span class="ruby-identifier">cx</span>, <span class="ruby-identifier">yx</span>, <span class="ruby-identifier">mx</span>
547:       <span class="ruby-identifier">ca</span> = <span class="ruby-identifier">precision</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">cx</span>  <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">cx</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'Circa'</span>)) <span class="ruby-operator">||</span> (<span class="ruby-identifier">yx</span>  <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">yx</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'Circa'</span>)) <span class="ruby-operator">||</span> (<span class="ruby-identifier">mx</span>  <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">mx</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'Circa'</span>))
548:       <span class="ruby-identifier">vague</span> = <span class="ruby-identifier">cx</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">yx</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">mx</span>
549:       <span class="ruby-identifier">ca</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">vague</span> <span class="ruby-value">? </span><span class="ruby-operator">:</span><span class="ruby-identifier">lowlow</span> <span class="ruby-operator">:</span> (<span class="ruby-identifier">ca</span> <span class="ruby-value">? </span><span class="ruby-operator">:</span><span class="ruby-identifier">medium</span> <span class="ruby-operator">:</span> (<span class="ruby-identifier">vague</span> <span class="ruby-value">? </span><span class="ruby-operator">:</span><span class="ruby-identifier">low</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>))
550:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000577" class="method-detail">
        <a name="M000577"></a>

        <div class="method-heading">
          <a href="#M000577" class="method-signature">
          <span class="method-name">getPrecisionItem</span><span class="method-args">(degree, match = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000577-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000577-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 758</span>
758:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getPrecisionItem</span> <span class="ruby-identifier">degree</span>, <span class="ruby-identifier">match</span> = <span class="ruby-keyword kw">nil</span> 
759:       {
760:         <span class="ruby-identifier">:value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
761:         <span class="ruby-identifier">:children</span> =<span class="ruby-operator">&gt;</span> {},
762:         <span class="ruby-identifier">:attributes</span> =<span class="ruby-operator">&gt;</span> {
763:           <span class="ruby-identifier">:match</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">match</span>,
764:           <span class="ruby-identifier">:degree</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">degree</span>
765:         }
766:       }   
767:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000562" class="method-detail">
        <a name="M000562"></a>

        <div class="method-heading">
          <a href="#M000562" class="method-signature">
          <span class="method-name">getYearIso</span><span class="method-args">(century, centuryQualifier, chron)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000562-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000562-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 269</span>
269:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getYearIso</span> <span class="ruby-identifier">century</span>, <span class="ruby-identifier">centuryQualifier</span>, <span class="ruby-identifier">chron</span>
270:       <span class="ruby-identifier">century</span> = <span class="ruby-identifier">century</span>.<span class="ruby-identifier">to_i</span>
271:       
272:       <span class="ruby-identifier">yearModifier</span> = {
273:         <span class="ruby-identifier">:chronMin</span> =<span class="ruby-operator">&gt;</span> {
274:           <span class="ruby-keyword kw">nil</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>,
275:           <span class="ruby-identifier">:beginning</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>,
276:           <span class="ruby-identifier">:beginningToMiddle</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>,
277:           <span class="ruby-identifier">:firstHalf</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>,
278:           <span class="ruby-identifier">:firstHalfToMiddle</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">25</span>,
279:           <span class="ruby-identifier">:middle</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">25</span>,
280:           <span class="ruby-identifier">:middleToSecondHalf</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">50</span>,
281:           <span class="ruby-identifier">:secondHalf</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">50</span>,
282:           <span class="ruby-identifier">:middleToEnd</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">25</span>,
283:           <span class="ruby-identifier">:end</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">75</span>
284:         },
285:         <span class="ruby-identifier">:chronMax</span> =<span class="ruby-operator">&gt;</span> {
286:           <span class="ruby-keyword kw">nil</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>,
287:           <span class="ruby-identifier">:beginning</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">-75</span>,
288:           <span class="ruby-identifier">:beginningToMiddle</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">-50</span>,
289:           <span class="ruby-identifier">:firstHalf</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">-50</span>,
290:           <span class="ruby-identifier">:firstHalfToMiddle</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">-50</span>,
291:           <span class="ruby-identifier">:middle</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">-25</span>,
292:           <span class="ruby-identifier">:middleToSecondHalf</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">-25</span>,
293:           <span class="ruby-identifier">:secondHalf</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>,
294:           <span class="ruby-identifier">:middleToEnd</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>,
295:           <span class="ruby-identifier">:end</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
296:         }
297:       }[<span class="ruby-identifier">chron</span>][<span class="ruby-identifier">centuryQualifier</span> <span class="ruby-value">? </span><span class="ruby-identifier">centuryQualifier</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">'Circa'</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">to_sym</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>]
298: 
299:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">chron</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:chronMax</span>
300:         <span class="ruby-identifier">year</span> = <span class="ruby-identifier">century</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> (<span class="ruby-identifier">century</span> <span class="ruby-operator">*</span> <span class="ruby-value">100</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">yearModifier</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">4</span>, <span class="ruby-value str">'0'</span>) <span class="ruby-operator">:</span> ((<span class="ruby-identifier">century</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">*</span> <span class="ruby-value">100</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">yearModifier</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">abs</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">4</span>, <span class="ruby-value str">'0'</span>)
301:       <span class="ruby-keyword kw">else</span>
302:         <span class="ruby-identifier">year</span> = <span class="ruby-identifier">century</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> (<span class="ruby-identifier">century</span> <span class="ruby-operator">*</span> <span class="ruby-value">100</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">yearModifier</span>).<span class="ruby-identifier">abs</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">4</span>, <span class="ruby-value str">'0'</span>) <span class="ruby-operator">:</span> ((<span class="ruby-identifier">century</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) <span class="ruby-operator">*</span> <span class="ruby-value">100</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">yearModifier</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">4</span>, <span class="ruby-value str">'0'</span>)
303:       <span class="ruby-keyword kw">end</span>
304: 
305:       (<span class="ruby-identifier">century</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value str">'-'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">year</span>
306:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000567" class="method-detail">
        <a name="M000567"></a>

        <div class="method-heading">
          <a href="#M000567" class="method-signature">
          <span class="method-name">getYearQualifier</span><span class="method-args">(month = nil, month2 = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000567-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000567-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 429</span>
429:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getYearQualifier</span> <span class="ruby-identifier">month</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">month2</span> = <span class="ruby-keyword kw">nil</span>
430:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">month</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">month2</span>
431:         <span class="ruby-keyword kw">return</span> {
432:           [<span class="ruby-value">1</span>, <span class="ruby-value">2</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:lateWinter</span>,
433:           [<span class="ruby-value">2</span>, <span class="ruby-value">5</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:spring</span>,
434:           [<span class="ruby-value">5</span>, <span class="ruby-value">8</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:summer</span>,
435:           [<span class="ruby-value">8</span>, <span class="ruby-value">11</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:autumn</span>,
436:           [<span class="ruby-value">11</span>, <span class="ruby-value">12</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:earlyWinter</span>,
437:           [<span class="ruby-value">1</span>, <span class="ruby-value">6</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:firstHalf</span>,
438:           [<span class="ruby-value">4</span>, <span class="ruby-value">9</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middle</span>,
439:           [<span class="ruby-value">7</span>, <span class="ruby-value">12</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:secondHalf</span>,
440:           [<span class="ruby-value">1</span>, <span class="ruby-value">3</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:beginning</span>,
441:           [<span class="ruby-value">4</span>, <span class="ruby-value">6</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:fistHalfToMiddle</span>,
442:           [<span class="ruby-value">7</span>, <span class="ruby-value">9</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middleToFirstHalf</span>,
443:           [<span class="ruby-value">10</span>, <span class="ruby-value">12</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:end</span>
444:         }[[<span class="ruby-identifier">month</span>, <span class="ruby-identifier">month2</span>]]
445:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">month</span>
446:         <span class="ruby-keyword kw">return</span> {
447:           <span class="ruby-value">1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:beginning</span>,
448:           <span class="ruby-value">2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:spring</span>,
449:           <span class="ruby-value">4</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middle</span>,
450:           <span class="ruby-value">5</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:summer</span>,
451:           <span class="ruby-value">7</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:secondHalf</span>,
452:           <span class="ruby-value">8</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:autumn</span>,
453:           <span class="ruby-value">10</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:end</span>,
454:           <span class="ruby-value">11</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:earlyWinter</span>
455:         }[<span class="ruby-identifier">month</span>]
456:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">month2</span>
457:         <span class="ruby-keyword kw">return</span> {
458:           <span class="ruby-value">2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:lateWinter</span>,
459:           <span class="ruby-value">3</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:beginning</span>,
460:           <span class="ruby-value">5</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:spring</span>,
461:           <span class="ruby-value">6</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:firstHalf</span>,
462:           <span class="ruby-value">8</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:summer</span>,
463:           <span class="ruby-value">9</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:middle</span>,
464:           <span class="ruby-value">11</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:autumn</span>,
465:           <span class="ruby-value">12</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:end</span>,
466:         }[<span class="ruby-identifier">month2</span>]
467:       <span class="ruby-keyword kw">else</span>
468:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
469:       <span class="ruby-keyword kw">end</span>
470:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000580" class="method-detail">
        <a name="M000580"></a>

        <div class="method-heading">
          <a href="#M000580" class="method-signature">
          <span class="method-name">hgvToEpidoc</span><span class="method-args">(date_item)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000580-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000580-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 791</span>
791:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">hgvToEpidoc</span> <span class="ruby-identifier">date_item</span>
792:       <span class="ruby-identifier">t</span> = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getEmptyEpidocItem</span>
793:         
794:       <span class="ruby-comment cmt"># date it X, Y, Z</span>
795:       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:id</span>] = <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:id</span>]
796: 
797:       <span class="ruby-comment cmt"># unknown</span>
798:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:unknown</span>]
799:         <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:value</span>] = <span class="ruby-value str">'unbekannt'</span>
800:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">t</span>
801:       <span class="ruby-keyword kw">end</span>
802: 
803:       <span class="ruby-comment cmt"># centuries</span>
804:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:c</span>]
805:         <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:notBefore</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getYearIso</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:c</span>], <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:cx</span>], <span class="ruby-identifier">:chronMin</span>
806:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:c2</span>]
807:           <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:notAfter</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getYearIso</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:c2</span>], <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:cx2</span>], <span class="ruby-identifier">:chronMax</span>
808:         <span class="ruby-keyword kw">else</span>
809:           <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:notAfter</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getYearIso</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:c</span>], <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:cx</span>], <span class="ruby-identifier">:chronMax</span>
810:         <span class="ruby-keyword kw">end</span>
811: 
812:         <span class="ruby-identifier">ca</span> = <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:cx</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:cx</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'Circa'</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword kw">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">false</span>
813:         <span class="ruby-identifier">ca2</span> = <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:cx2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:cx2</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'Circa'</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword kw">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">false</span>
814: 
815:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ca</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ca2</span>
816:           <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>][<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>].<span class="ruby-identifier">length</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getPrecisionItem</span> <span class="ruby-value str">'0.1'</span>
817:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ca</span>
818:           <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>][<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>].<span class="ruby-identifier">length</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getPrecisionItem</span> <span class="ruby-value str">'0.1'</span>, <span class="ruby-value str">'../@notBefore'</span>
819:           <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>][<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>].<span class="ruby-identifier">length</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getPrecisionItem</span> <span class="ruby-value str">'0.3'</span>, <span class="ruby-value str">'../@notAfter'</span>
820:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">ca2</span>
821:           <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>][<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>].<span class="ruby-identifier">length</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getPrecisionItem</span> <span class="ruby-value str">'0.3'</span>, <span class="ruby-value str">'../@notBefore'</span>
822:           <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>][<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>].<span class="ruby-identifier">length</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getPrecisionItem</span> <span class="ruby-value str">'0.1'</span>, <span class="ruby-value str">'../@notAfter'</span>
823:         <span class="ruby-keyword kw">else</span>
824:           <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:precision</span>] = <span class="ruby-value str">'low'</span>
825:         <span class="ruby-keyword kw">end</span>
826:       <span class="ruby-keyword kw">else</span>
827:         <span class="ruby-identifier">y</span> = {<span class="ruby-keyword kw">nil</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>, <span class="ruby-value">0</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'-'</span>}[<span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:y</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/-/</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:y</span>].<span class="ruby-identifier">sub</span>(<span class="ruby-value str">'-'</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">rjust</span>(<span class="ruby-value">4</span>, <span class="ruby-value str">'0'</span>)
828:         <span class="ruby-identifier">m</span> = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getMonthIso</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:m</span>], <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:yx</span>], <span class="ruby-identifier">:chronMin</span>
829:         <span class="ruby-identifier">d</span> = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getDayIso</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:d</span>], <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:m</span>], <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:mx</span>], <span class="ruby-identifier">:chronMin</span>
830:         
831:         <span class="ruby-identifier">date</span> = <span class="ruby-identifier">y</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">m</span> <span class="ruby-value">? </span><span class="ruby-value str">'-'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">m</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">d</span> <span class="ruby-value">? </span><span class="ruby-value str">'-'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">d</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>) <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>)
832:         
833:         <span class="ruby-comment cmt"># only one date</span>
834:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:y2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:m2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:d2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:yx</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:mx</span>]
835:           <span class="ruby-identifier">attribute</span> = <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:offset</span>] <span class="ruby-operator">?</span> (<span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:offset</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'before'</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">:notAfter</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">:notBefore</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">:when</span>
836:           <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">attribute</span>] = <span class="ruby-identifier">date</span>
837:         <span class="ruby-keyword kw">else</span>
838:           <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:notBefore</span>] = <span class="ruby-identifier">date</span>
839:           
840:           <span class="ruby-identifier">y2</span> = <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:y2</span>] <span class="ruby-operator">?</span> {<span class="ruby-keyword kw">nil</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>, <span class="ruby-value">0</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'-'</span>}[<span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:y2</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/-/</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:y2</span>].<span class="ruby-identifier">sub</span>(<span class="ruby-value str">'-'</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">rjust</span>(<span class="ruby-value">4</span>, <span class="ruby-value str">'0'</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">y</span>
841:           <span class="ruby-identifier">m2</span> = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getMonthIso</span>((<span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:m2</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:m2</span>] <span class="ruby-operator">:</span> (<span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:d2</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:m</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>)), (<span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:yx2</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:yx2</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:yx</span>]), <span class="ruby-identifier">:chronMax</span>)
842:           <span class="ruby-identifier">d2</span> = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getDayIso</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:d2</span>], (<span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:m</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:m</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>), (<span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:mx</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:mx</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:mx2</span>]), <span class="ruby-identifier">:chronMax</span>
843:           
844:           <span class="ruby-identifier">date2</span> = <span class="ruby-identifier">y2</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">m2</span> <span class="ruby-value">? </span><span class="ruby-value str">'-'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">m2</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">d2</span> <span class="ruby-value">? </span><span class="ruby-value str">'-'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">d2</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>) <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>)
845:           
846:           <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:notAfter</span>] = <span class="ruby-identifier">date2</span>
847:         <span class="ruby-keyword kw">end</span>
848: 
849:         <span class="ruby-comment cmt"># precision</span>
850:         <span class="ruby-identifier">precision</span> = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getPrecision</span>(<span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:precision</span>], <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:cx</span>], <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:yx</span>], <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:mx</span>])
851:         <span class="ruby-identifier">precision2</span> = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getPrecision</span>(<span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:precision2</span>], <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:cx2</span>], <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:yx2</span>], <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:mx2</span>])
852: 
853:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">precision</span> <span class="ruby-operator">&amp;&amp;</span> ((<span class="ruby-identifier">precision</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">precision2</span>) <span class="ruby-operator">||</span> ([<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:when</span>], <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:notBefore</span>], <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:notAfter</span>]].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>))
854:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">precision</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:lowlow</span>
855:             <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>][<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>].<span class="ruby-identifier">length</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getPrecisionItem</span> <span class="ruby-value str">'0.1'</span>
856:           <span class="ruby-keyword kw">else</span>
857:             <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:precision</span>] = <span class="ruby-identifier">precision</span>
858:           <span class="ruby-keyword kw">end</span>
859:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">precision</span>
860:            <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>][<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>].<span class="ruby-identifier">length</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getPrecisionItem</span>(<span class="ruby-identifier">precision</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:low</span> <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> (<span class="ruby-identifier">precision</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:medium</span> <span class="ruby-operator">?</span> <span class="ruby-value str">'0.5'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'0.1'</span>), <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:when</span>] <span class="ruby-operator">?</span> <span class="ruby-value str">'../@when'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'../@notBefore'</span>)
861:         <span class="ruby-keyword kw">end</span>
862:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">precision2</span>
863:           <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>][<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:precision</span>].<span class="ruby-identifier">length</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getPrecisionItem</span>(<span class="ruby-identifier">precision2</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:low</span> <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> (<span class="ruby-identifier">precision2</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:medium</span> <span class="ruby-operator">?</span> <span class="ruby-value str">'0.5'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'0.1'</span>), <span class="ruby-value str">'../@notAfter'</span>)
864:         <span class="ruby-keyword kw">end</span>
865: 
866:         
867:       <span class="ruby-keyword kw">end</span>
868:             
869:       <span class="ruby-comment cmt"># offset</span>
870:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:offset</span>]
871:         <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:offset</span>][<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:offset</span>].<span class="ruby-identifier">length</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getOffsetItem</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:offset</span>], <span class="ruby-value">1</span>
872:       <span class="ruby-keyword kw">end</span>
873: 
874:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:offset2</span>]
875:         <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:offset</span>][<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:offset</span>].<span class="ruby-identifier">length</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getOffsetItem</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:offset2</span>], <span class="ruby-value">2</span>
876:       <span class="ruby-keyword kw">end</span>
877: 
878:       <span class="ruby-comment cmt"># offset certainty</span>
879:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:offset</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:offset</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'Uncertain'</span>)
880:         <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:certainty</span>][<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:certainty</span>].<span class="ruby-identifier">length</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getCertaintyItem</span> <span class="ruby-value str">&quot;../offset[@type='&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:offset</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">'Uncertain'</span>, <span class="ruby-value str">''</span>)<span class="ruby-operator">+</span><span class="ruby-value str">&quot;']&quot;</span>
881:       <span class="ruby-keyword kw">end</span>
882: 
883:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:offset2</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:offset2</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'Uncertain'</span>)
884:         <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:certainty</span>][<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:certainty</span>].<span class="ruby-identifier">length</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getCertaintyItem</span> <span class="ruby-value str">&quot;../offset[@type='&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:offset2</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-value str">'Uncertain'</span>, <span class="ruby-value str">''</span>)<span class="ruby-operator">+</span><span class="ruby-value str">&quot;']&quot;</span>
885:       <span class="ruby-keyword kw">end</span>
886:       
887:       <span class="ruby-comment cmt"># certainty</span>
888:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:certainty</span>] <span class="ruby-comment cmt"># global uncertainty</span>
889:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:certainty</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">:low</span>
890:           <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:certainty</span>] = <span class="ruby-value str">'low'</span>
891:         <span class="ruby-keyword kw">else</span> <span class="ruby-comment cmt"># uncertainty for day, month or year</span>
892:           <span class="ruby-identifier">date_item</span>[<span class="ruby-identifier">:certainty</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'_'</span>).<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">dayMonthYear</span><span class="ruby-operator">|</span>
893:             <span class="ruby-identifier">match</span> = <span class="ruby-value str">'../'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dayMonthYear</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'-from-date(@'</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:attributes</span>][<span class="ruby-identifier">:when</span>] <span class="ruby-operator">?</span> <span class="ruby-value str">'when'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'notBefore'</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">')'</span> <span class="ruby-comment cmt"># cl: support for plurals would go here </span>
894:             <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:certainty</span>][<span class="ruby-identifier">t</span>[<span class="ruby-identifier">:children</span>][<span class="ruby-identifier">:certainty</span>].<span class="ruby-identifier">length</span>] = <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">getCertaintyItem</span> <span class="ruby-identifier">match</span>
895:           }
896:         <span class="ruby-keyword kw">end</span>
897:       <span class="ruby-keyword kw">end</span>
898:       
899:       <span class="ruby-comment cmt"># hgv format</span>
900:       <span class="ruby-identifier">t</span>[<span class="ruby-identifier">:value</span>] = <span class="ruby-constant">HgvFormat</span>.<span class="ruby-identifier">formatDate</span> <span class="ruby-identifier">date_item</span>
901: 
902:       <span class="ruby-identifier">t</span>
903:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000571" class="method-detail">
        <a name="M000571"></a>

        <div class="method-heading">
          <a href="#M000571" class="method-signature">
          <span class="method-name">monthFromIso</span><span class="method-args">(iso)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000571-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000571-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 508</span>
508:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">monthFromIso</span> <span class="ruby-identifier">iso</span>
509:       <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">extractFromIso</span> <span class="ruby-identifier">iso</span>, <span class="ruby-regexp re">/\A-?\d\d\d\d-(\d\d)/</span>
510:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000557" class="method-detail">
        <a name="M000557"></a>

        <div class="method-heading">
          <a href="#M000557" class="method-signature">
          <span class="method-name">monthOptions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000557-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000557-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 199</span>
199:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">monthOptions</span>
200:       [[<span class="ruby-value str">''</span>, <span class="ruby-value str">''</span>], 
201:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.beginning'</span>), <span class="ruby-identifier">:beginning</span>],
202:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.beginningCirca'</span>), <span class="ruby-identifier">:beginningCirca</span>],
203:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.middle'</span>), <span class="ruby-identifier">:middle</span>], 
204:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.middleCirca'</span>), <span class="ruby-identifier">:middleCirca</span>],
205:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.end'</span>), <span class="ruby-identifier">:end</span>], 
206:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.endCirca'</span>), <span class="ruby-identifier">:endCirca</span>]]
207:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000560" class="method-detail">
        <a name="M000560"></a>

        <div class="method-heading">
          <a href="#M000560" class="method-signature">
          <span class="method-name">offsetOptions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000560-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000560-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 249</span>
249:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">offsetOptions</span>
250:       [[<span class="ruby-value str">''</span>, <span class="ruby-value str">''</span>], 
251:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.before'</span>), <span class="ruby-identifier">:before</span>], 
252:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.after'</span>), <span class="ruby-identifier">:after</span>], 
253:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.beforeUncertain'</span>), <span class="ruby-identifier">:beforeUncertain</span>], 
254:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.afterUncertain'</span>), <span class="ruby-identifier">:afterUncertain</span>]]
255:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000556" class="method-detail">
        <a name="M000556"></a>

        <div class="method-heading">
          <a href="#M000556" class="method-signature">
          <span class="method-name">precisionOptions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000556-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000556-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 194</span>
194:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">precisionOptions</span>
195:       [[<span class="ruby-value str">''</span>, <span class="ruby-value str">''</span>], 
196:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.ca'</span>), <span class="ruby-identifier">:ca</span>]]
197:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000570" class="method-detail">
        <a name="M000570"></a>

        <div class="method-heading">
          <a href="#M000570" class="method-signature">
          <span class="method-name">yearFromIso</span><span class="method-args">(iso)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000570-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000570-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 504</span>
504:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">yearFromIso</span> <span class="ruby-identifier">iso</span>
505:       <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">extractFromIso</span> <span class="ruby-identifier">iso</span>, <span class="ruby-regexp re">/\A(-?\d\d\d\d)/</span>
506:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000558" class="method-detail">
        <a name="M000558"></a>

        <div class="method-heading">
          <a href="#M000558" class="method-signature">
          <span class="method-name">yearOptions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000558-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000558-source">
<pre>
     <span class="ruby-comment cmt"># File app/helpers/hgv_meta_identifier_helper.rb, line 209</span>
209:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">HgvDate</span>.<span class="ruby-identifier">yearOptions</span>
210:       [[<span class="ruby-value str">''</span>, <span class="ruby-value str">''</span>], 
211:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.beginning'</span>), <span class="ruby-identifier">:beginning</span>], 
212:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.beginningCirca'</span>), <span class="ruby-identifier">:beginningCirca</span>], 
213:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.firstHalf'</span>), <span class="ruby-identifier">:firstHalf</span>], 
214:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.firstHalfCirca'</span>), <span class="ruby-identifier">:firstHalfCirca</span>], 
215:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.firstHalfToMiddle'</span>), <span class="ruby-identifier">:firstHalfToMiddle</span>], 
216:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.firstHalfToMiddleCirca'</span>), <span class="ruby-identifier">:firstHalfToMiddleCirca</span>], 
217:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.middle'</span>), <span class="ruby-identifier">:middle</span>], 
218:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.middleCirca'</span>), <span class="ruby-identifier">:middleCirca</span>], 
219:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.middleToSecondHalf'</span>), <span class="ruby-identifier">:middleToSecondHalf</span>], 
220:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.middleToSecondHalfCirca'</span>), <span class="ruby-identifier">:middleToSecondHalfCirca</span>], 
221:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.secondHalf'</span>), <span class="ruby-identifier">:secondHalf</span>], 
222:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.secondHalfCirca'</span>), <span class="ruby-identifier">:secondHalfCirca</span>], 
223:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.end'</span>), <span class="ruby-identifier">:end</span>],
224:         [<span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value str">'date.endCirca'</span>), <span class="ruby-identifier">:endCirca</span>]]
225:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>